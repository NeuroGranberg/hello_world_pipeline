pull:
  - prefect.deployments.steps.git_clone:
      repository: "{{ env('PIPELINE_REPOSITORY', 'https://github.com/NeuroGranberg/hello_world_pipeline.git') }}"
      branch: "{{ env('PIPELINE_BRANCH', 'main') }}"

build:
  - prefect.deployments.steps.python_import:
      function: flows.hello.hello_flow

push: []

deployments:
  - name: hello:local-cpu
    entrypoint: flows/hello.py:hello_flow
    work_pool:
      name: local-cpu-pool
    parameters:
      name: "World"

  - name: hello:docker-cpu
    entrypoint: flows/hello.py:hello_flow
    work_pool:
      name: docker-cpu-pool
      job_variables:
        image: "{{ env('PIPELINE_IMAGE', 'ghcr.io/your-org/hello-world:latest') }}"
    parameters:
      name: "World"
